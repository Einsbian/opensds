<div class="table-toolbar">
    <div class="left">
        <button class="ui-button-secondary" pButton type="button" label="Create" [routerLink]="['/createVolume']"></button>
        <button pButton type="button" label="Delete" (click)="batchDeleteVolume()" [disabled]="selectedVolumes.length == 0"></button>
    </div>
    <div class="right">
        <div class="ui-inputsearch">
            <input type="text" pInputText placeholder="search">
            <button pButton type="button" icon="fa-search"></button>
        </div>
        <button class="" pButton type="button" icon="fa-refresh"></button>
    </div>
</div>
<p-dataTable [value]="volumes" selectionMode="multiple" [(selection)]="selectedVolumes" [showHeaderCheckbox]="true" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]">
    <p-column selectionMode="multiple"></p-column>
    <p-column field="name" header="Name" [style]="{'width': '20%'}">
        <ng-template pTemplate="body" let-volume="rowData">
            <a [routerLink]="['/volumeDetails/' + volume.id]">{{volume.name}}</a>
        </ng-template>
    </p-column>
    <p-column field="status" header="Status"></p-column>
    <p-column field="size" header="Capacity"></p-column>
    <p-column field="profileId" header="Profile"></p-column>
    <p-column field="availabilityZone" header="Availability Zone"></p-column>
    <p-column header="Operation" [style]="{'width': '30%'}">
        <ng-template pTemplate="body" let-volume="rowData" let-i="rowIndex">
            <a (click)="returnSelectedVolume(volume,'snapshot')">Create Snapshot</a>
            <a (click)="returnSelectedVolume(volume,'replication')">Create Replication</a>
            <p-dropmenu label="More" [model]="menuItems" (click)="returnSelectedVolume(volume)"></p-dropmenu>
        </ng-template>
    </p-column>
</p-dataTable>

<p-dialog *ngIf="createSnapshotDisplay" [header]="popTitle" [(visible)]="createSnapshotDisplay" [width]="600" modal="modal">
    <form [grid]="{label: 'ui-g-4', content:'ui-g-20'}" [formGroup]="snapshotFormGroup" [errorMessage]="errorMessage">
        <form-item label="{{label.volume}}" [required]="false">
            <span>{{selectedVolume.name}}</span>
        </form-item>

        <form-item label="{{label.name}}" [required]="true">
            <input type="text" pInputText formControlName="name" />
        </form-item>

        <form-item label="{{label.description}}" [required]="false">
            <textarea [rows]="5" [cols]="30" pInputTextarea formControlName="description"></textarea>
        </form-item>
    </form>

    <p-footer>
        <button type="button" pButton (click)="createSnapshot()" label="OK"></button>
        <button type="button" pButton (click)="createSnapshotDisplay=false" label="Cancel"></button>
    </p-footer>
</p-dialog>

<p-dialog *ngIf="modifyDisplay" header="Modify" [(visible)]="modifyDisplay" [width]="600" modal="modal">
    <form [grid]="{label: 'ui-g-4', content:'ui-g-20'}" [formGroup]="modifyFormGroup" [errorMessage]="errorMessage">
        <form-item label="{{label.name}}" [required]="true">
            <input type="text" pInputText formControlName="name" value="{{selectedVolume.name}}" />
        </form-item>
    </form>
    <p-footer>
        <button type="button" pButton (click)="modifyVolume()" label="OK" [disabled]="!modifyFormGroup.valid || modifyFormGroup.value.name === selectedVolume.name"></button>
        <button type="button" pButton (click)="modifyDisplay=false" label="Cancel"></button>
    </p-footer>
</p-dialog>